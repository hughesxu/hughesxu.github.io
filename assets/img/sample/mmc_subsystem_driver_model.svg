<svg width="2999" height="2554" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" overflow="hidden"><defs><clipPath id="clip0"><path d="M728 560 3727 560 3727 3114 728 3114Z" fill-rule="evenodd" clip-rule="evenodd"/></clipPath></defs><g clip-path="url(#clip0)" transform="translate(-728 -560)"><rect x="1626" y="937" width="733" height="342" stroke="#000000" stroke-width="4" stroke-linejoin="round" stroke-miterlimit="10" fill="none"/><path d="M1683.9 1094.57 1914.9 1094.57 1914.9 1143.57 1683.9 1143.57Z" fill="#FFFF00" fill-rule="evenodd"/><path d="M1914.9 1094.57 2248.57 1094.57 2248.57 1143.57 1914.9 1143.57Z" fill="#FFFF00" fill-rule="evenodd"/><path d="M1683.9 1145.57 1837.9 1145.57 1837.9 1194.57 1683.9 1194.57Z" fill="#FFFF00" fill-rule="evenodd"/><path d="M1837.9 1145.57 1863.57 1145.57 1863.57 1194.57 1837.9 1194.57Z" fill="#FFFF00" fill-rule="evenodd"/><path d="M1863.57 1145.57 1914.9 1145.57 1914.9 1194.57 1863.57 1194.57Z" fill="#FFFF00" fill-rule="evenodd"/><path d="M1914.9 1145.57 2248.57 1145.57 2248.57 1194.57 1914.9 1194.57Z" fill="#FFFF00" fill-rule="evenodd"/><text font-family="Courier New,Courier New_MSFontService,sans-serif" font-weight="700" font-size="37" transform="translate(1914.4 975)">MMC Bus<tspan font-weight="400" font-size="32" x="-278.5" y="69">struct </tspan><tspan font-weight="400" font-size="32" x="-144.333" y="69">bus_type</tspan><tspan font-size="32" x="28.1666" y="69">mmc_bus_type</tspan><tspan font-size="32" x="277.333" y="69">= </tspan><tspan font-weight="400" font-size="32" x="315.667" y="69">{</tspan><tspan font-weight="400" font-size="32" x="-230.5" y="107">...</tspan><tspan font-size="43" x="-230.5" y="155">.match = </tspan><tspan font-size="43" x="0.5" y="155">mmc_bus_match</tspan><tspan font-size="43" x="-230.5" y="206">.probe</tspan><tspan font-size="43" x="-76.5" y="206"> </tspan><tspan font-size="43" x="-50.8334" y="206">= </tspan><tspan font-size="43" x="0.5" y="206">mmc_bus_probe</tspan><tspan font-weight="400" font-size="32" x="-230.5" y="248">...</tspan><tspan font-weight="400" font-size="32" x="-278.5" y="286">};</tspan></text><rect x="738" y="1981" width="751" height="485" stroke="#000000" stroke-width="4" stroke-linejoin="round" stroke-miterlimit="10" fill="none"/><path d="M824.267 2293.13 1080.93 2293.13 1080.93 2342.13 824.267 2342.13Z" fill="#FFFF00" fill-rule="evenodd"/><path d="M1080.93 2293.13 1414.6 2293.13 1414.6 2342.13 1080.93 2342.13Z" fill="#FFFF00" fill-rule="evenodd"/><text font-family="Courier New,Courier New_MSFontService,sans-serif" font-weight="700" font-size="37" transform="translate(1001.85 2019)">MMC <tspan x="89.3334" y="0">Driver</tspan><tspan font-weight="400" font-size="32" x="-254.247" y="69">struct </tspan><tspan font-weight="400" font-size="32" x="-120.08" y="69">mmc_driver</tspan><tspan font-size="32" x="90.7533" y="69">mmc_driver</tspan><tspan font-weight="400" font-size="32" x="301.587" y="69">= {</tspan><tspan font-weight="400" font-size="32" x="-177.58" y="107">.</tspan><tspan font-weight="400" font-size="32" x="-158.413" y="107">drv</tspan><tspan font-weight="400" font-size="32" x="52.42" y="107">= {</tspan><tspan font-weight="400" font-size="32" x="-100.913" y="146">.name   = "</tspan><tspan font-weight="400" font-size="32" x="109.92" y="146">mmcblk</tspan><tspan font-weight="400" font-size="32" x="224.92" y="146">",</tspan><tspan font-weight="400" font-size="32" x="-100.913" y="184">.pm     = &amp;</tspan><tspan font-weight="400" font-size="32" x="109.92" y="184">mmc_blk_pm_ops</tspan><tspan font-weight="400" font-size="32" x="378.253" y="184">,</tspan><tspan font-weight="400" font-size="32" x="-110.247" y="222">.bus</tspan><tspan font-weight="400" font-size="32" x="52.92" y="222">= &amp;</tspan><tspan font-weight="400" font-size="32" x="110.42" y="222">mmc_bus_type</tspan><tspan font-weight="400" font-size="32" x="-177.58" y="261">},</tspan><tspan fill="#FF0000" font-size="43" x="-177.58" y="309">.probe  = </tspan><tspan fill="#FF0000" font-size="43" x="79.0867" y="309">mmc_blk_probe</tspan><tspan font-weight="400" font-size="32" x="412.753" y="309">,</tspan><tspan font-weight="400" font-size="32" x="-177.58" y="350">.remove     = </tspan><tspan font-weight="400" font-size="32" x="90.7533" y="350">mmc_blk_remove</tspan><tspan font-weight="400" font-size="32" x="359.087" y="350">,</tspan><tspan font-weight="400" font-size="32" x="-177.58" y="389">.shutdown   = </tspan><tspan font-weight="400" font-size="32" x="90.7533" y="389">mmc_blk_shutdown</tspan><tspan font-weight="400" font-size="32" x="397.42" y="389">,</tspan><tspan font-weight="400" font-size="32" x="-254.247" y="427">};</tspan></text><rect x="2567" y="2510" width="712" height="594" stroke="#000000" stroke-width="4" stroke-linejoin="round" stroke-miterlimit="10" fill="none"/><path d="M2577.08 2676.51 2625.08 2676.51 2625.08 2712.51 2577.08 2712.51Z" fill="#FFFF00" fill-rule="evenodd"/><path d="M2625.08 2676.51 2701.74 2676.51 2701.74 2712.51 2625.08 2712.51Z" fill="#FFFF00" fill-rule="evenodd"/><path d="M2701.74 2676.51 2720.91 2676.51 2720.91 2712.51 2701.74 2712.51Z" fill="#FFFF00" fill-rule="evenodd"/><path d="M2720.91 2676.51 2740.08 2676.51 2740.08 2712.51 2720.91 2712.51Z" fill="#FFFF00" fill-rule="evenodd"/><path d="M2740.08 2676.51 2759.24 2676.51 2759.24 2712.51 2740.08 2712.51Z" fill="#FFFF00" fill-rule="evenodd"/><path d="M2759.24 2676.51 2778.41 2676.51 2778.41 2712.51 2759.24 2712.51Z" fill="#FFFF00" fill-rule="evenodd"/><path d="M2577.08 2715.51 2625.08 2715.51 2625.08 2757.51 2577.08 2757.51Z" fill="#FFFF00" fill-rule="evenodd"/><path d="M2625.08 2715.51 2673.08 2715.51 2673.08 2757.51 2625.08 2757.51Z" fill="#FFFF00" fill-rule="evenodd"/><path d="M2673.08 2715.51 2883.91 2715.51 2883.91 2757.51 2673.08 2757.51Z" fill="#FFFF00" fill-rule="evenodd"/><path d="M2883.91 2715.51 3218.91 2715.51 3218.91 2757.51 2883.91 2757.51Z" fill="#FFFF00" fill-rule="evenodd"/><path d="M3218.91 2715.51 3241.24 2715.51 3241.24 2757.51 3218.91 2757.51Z" fill="#FFFF00" fill-rule="evenodd"/><path d="M2577.08 2759.51 2625.08 2759.51 2625.08 2795.51 2577.08 2795.51Z" fill="#FFFF00" fill-rule="evenodd"/><path d="M2625.08 2759.51 2644.24 2759.51 2644.24 2795.51 2625.08 2795.51Z" fill="#FFFF00" fill-rule="evenodd"/><text font-family="Courier New,Courier New_MSFontService,sans-serif" font-weight="700" font-size="37" transform="translate(2755.91 2548)">MMC card Device<tspan font-weight="400" font-size="24" x="-178.833" y="62">struct </tspan><tspan font-weight="400" font-size="24" x="-78.5" y="62">mmc_host</tspan><tspan font-size="24" x="50.5" y="62">mmc</tspan><tspan font-weight="400" font-size="24" x="107.833" y="62">= {</tspan><tspan font-weight="400" font-size="24" x="-130.833" y="91">.</tspan><tspan font-weight="400" font-size="24" x="-116.5" y="91">class_dev</tspan><tspan font-weight="400" font-size="24" x="26.8335" y="91">(struct device);</tspan><tspan font-weight="400" font-size="24" x="-130.833" y="119">INIT_DELAYED_WORK(&amp;.detect, </tspan><tspan font-weight="400" font-size="24" x="270.5" y="119">mmc_rescan</tspan><tspan font-weight="400" font-size="24" x="413.833" y="119">);</tspan><tspan font-weight="400" font-size="32" x="-178.833" y="155"> </tspan><tspan font-weight="400" font-size="32" x="-130.833" y="155">.ops</tspan><tspan font-weight="400" font-size="32" x="-54.1665" y="155"> </tspan><tspan font-weight="400" font-size="32" x="-35" y="155">=</tspan><tspan font-weight="400" font-size="32" x="-15.8333" y="155"> </tspan><tspan font-weight="400" font-size="32" x="3.3335" y="155">{</tspan><tspan font-weight="400" font-size="32" x="-178.833" y="198"> </tspan><tspan font-weight="400" font-size="32" x="-130.833" y="198"> </tspan><tspan font-weight="400" font-size="32" x="-82.8333" y="198">.request = </tspan><tspan x="128" y="198">xxx_mmc_request</tspan>;<tspan font-weight="400" font-size="32" x="-178.833" y="238"> </tspan><tspan font-weight="400" font-size="32" x="-130.833" y="238">}</tspan><tspan font-weight="400" font-size="24" x="-178.833" y="270">}</tspan><tspan font-weight="400" font-size="32" x="-178.833" y="306">struct </tspan><tspan font-weight="400" font-size="32" x="-44.6665" y="306">mmc_card</tspan><tspan font-size="32" x="127.833" y="306">card</tspan><tspan font-weight="400" font-size="32" x="223.667" y="306">= {</tspan><tspan font-weight="400" font-size="32" x="-102.167" y="344">.host = &amp;mmc;</tspan><tspan font-weight="400" font-size="32" x="-92.5" y="382">.dev</tspan><tspan font-weight="400" font-size="32" x="22.5" y="382">= {</tspan><tspan font-weight="400" font-size="32" x="-34.8333" y="421">.parent = &amp;(</tspan><tspan font-weight="400" font-size="32" x="195.167" y="421">mmc.class_dev</tspan><tspan font-weight="400" font-size="32" x="444.333" y="421">);</tspan><tspan font-weight="400" font-size="32" x="-34.8333" y="459">.bus</tspan><tspan font-weight="400" font-size="32" x="61" y="459">=</tspan><tspan font-weight="400" font-size="32" x="99.3335" y="459">&amp;</tspan><tspan font-weight="400" font-size="32" x="118.5" y="459">mmc_bus_type</tspan><tspan font-weight="400" font-size="32" x="348.5" y="459">;</tspan><tspan font-weight="400" font-size="32" x="-82.8333" y="498">}</tspan><tspan font-weight="400" font-size="32" x="-178.833" y="536">}</tspan><tspan font-weight="400" font-size="32" x="-159.667" y="536">;</tspan><tspan fill="#353A3D" font-size="32" x="-895.95" y="-1885">MMC </tspan><tspan fill="#353A3D" font-family="DengXian,DengXian_MSFontService,sans-serif" font-size="32" x="-819.284" y="-1885">总线</tspan><tspan fill="#353A3D" font-family="DengXian,DengXian_MSFontService,sans-serif" font-size="32" x="-755.284" y="-1885">注册流程</tspan><tspan fill="#353A3D" font-family="DengXian,DengXian_MSFontService,sans-serif" font-size="32" x="-627.284" y="-1885">：</tspan><tspan fill="#353A3D" font-size="32" x="-1125.7" y="-1770">subsys_initcall</tspan><tspan fill="#353A3D" font-size="32" x="-838.197" y="-1770">(</tspan><tspan fill="#353A3D" font-size="32" x="-819.03" y="-1770">mmc_init</tspan><tspan fill="#353A3D" font-size="32" x="-665.697" y="-1770">)</tspan><tspan fill="#353A3D" font-size="32" x="-1125.7" y="-1713">mmc_register_bus</tspan><tspan fill="#353A3D" font-size="32" x="-819.03" y="-1713">()</tspan><tspan font-size="32" x="-1125.7" y="-1655">bus_register</tspan><tspan font-size="32" x="-895.697" y="-1655">(&amp;</tspan><tspan font-size="32" x="-857.364" y="-1655">mmc_bus_type</tspan><tspan font-size="32" x="-627.364" y="-1655">)</tspan><tspan font-size="32" x="-1653.64" y="-903">MMC</tspan><tspan font-family="DengXian,DengXian_MSFontService,sans-serif" font-size="32" x="-1576.98" y="-903">驱动</tspan><tspan font-family="DengXian,DengXian_MSFontService,sans-serif" font-size="32" x="-1512.98" y="-903">注册流程</tspan><tspan font-family="DengXian,DengXian_MSFontService,sans-serif" font-size="32" x="-1384.98" y="-903">：</tspan><tspan font-size="32" x="-2008.31" y="-788">module_init</tspan><tspan font-size="32" x="-1797.48" y="-788">(</tspan><tspan font-size="32" x="-1778.31" y="-788">mmc_blk_init</tspan><tspan font-size="32" x="-1548.31" y="-788">)</tspan><tspan font-size="32" x="-1969.98" y="-731">(1) </tspan><tspan font-size="32" x="-1893.31" y="-731">register_blkdev(MMC_BLOCK_MAJOR, “mmc”)</tspan><tspan font-size="32" x="-1969.98" y="-673">(</tspan><tspan font-size="32" x="-1950.81" y="-673">2) </tspan><tspan font-size="32" x="-1893.31" y="-673">mmc_register_driver(&amp;mmc_driver)</tspan><tspan font-size="32" x="-1912.31" y="-615">driver_register( &amp;(mmc_driver.drv) )</tspan></text><path d="M2299.6 1414.27 2529.6 1414.27 2529.6 1450.27 2299.6 1450.27Z" fill="#00FF00" fill-rule="evenodd"/><path d="M2529.6 1414.27 2561.6 1414.27 2561.6 1450.27 2529.6 1450.27Z" fill="#00FF00" fill-rule="evenodd"/><path d="M2561.6 1414.27 2714.93 1414.27 2714.93 1450.27 2561.6 1450.27Z" fill="#00FF00" fill-rule="evenodd"/><path d="M2714.93 1414.27 2906.93 1414.27 2906.93 1450.27 2714.93 1450.27Z" fill="#00FF00" fill-rule="evenodd"/><path d="M2906.93 1414.27 3194.43 1414.27 3194.43 1450.27 2906.93 1450.27Z" fill="#00FF00" fill-rule="evenodd"/><path d="M3194.43 1414.27 3450.43 1414.27 3450.43 1450.27 3194.43 1450.27Z" fill="#00FF00" fill-rule="evenodd"/><path d="M2299.6 1702.27 2337.93 1702.27 2337.93 1738.27 2299.6 1738.27Z" fill="#00FF00" fill-rule="evenodd"/><path d="M2337.93 1702.27 2357.1 1702.27 2357.1 1738.27 2337.93 1738.27Z" fill="#00FF00" fill-rule="evenodd"/><path d="M2357.1 1702.27 2376.27 1702.27 2376.27 1738.27 2357.1 1738.27Z" fill="#00FF00" fill-rule="evenodd"/><path d="M2376.27 1702.27 2472.1 1702.27 2472.1 1738.27 2376.27 1738.27Z" fill="#00FF00" fill-rule="evenodd"/><path d="M2472.1 1702.27 2491.27 1702.27 2491.27 1738.27 2472.1 1738.27Z" fill="#00FF00" fill-rule="evenodd"/><path d="M2491.27 1702.27 2682.93 1702.27 2682.93 1738.27 2491.27 1738.27Z" fill="#00FF00" fill-rule="evenodd"/><path d="M2682.93 1702.27 2906.93 1702.27 2906.93 1738.27 2682.93 1738.27Z" fill="#00FF00" fill-rule="evenodd"/><path d="M2906.93 1702.27 3002.77 1702.27 3002.77 1738.27 2906.93 1738.27Z" fill="#00FF00" fill-rule="evenodd"/><path d="M3002.77 1702.27 3194.77 1702.27 3194.77 1738.27 3002.77 1738.27Z" fill="#00FF00" fill-rule="evenodd"/><path d="M3194.77 1702.27 3213.93 1702.27 3213.93 1738.27 3194.77 1738.27Z" fill="#00FF00" fill-rule="evenodd"/><path d="M3213.93 1702.27 3463.1 1702.27 3463.1 1738.27 3213.93 1738.27Z" fill="#00FF00" fill-rule="evenodd"/><path d="M3463.1 1702.27 3501.43 1702.27 3501.43 1738.27 3463.1 1738.27Z" fill="#00FF00" fill-rule="evenodd"/><text font-family="Courier New,Courier New_MSFontService,sans-serif" font-weight="700" font-size="32" transform="translate(2809.68 1325)">MMC card <tspan font-family="DengXian,DengXian_MSFontService,sans-serif" x="172.5" y="0">设备</tspan><tspan font-family="DengXian,DengXian_MSFontService,sans-serif" x="236.5" y="0">注册流程</tspan><tspan font-family="DengXian,DengXian_MSFontService,sans-serif" x="364.5" y="0">：</tspan><tspan x="-510.08" y="115">(1) Step 1: </tspan><tspan font-family="DengXian,DengXian_MSFontService,sans-serif" x="-280.08" y="115">将</tspan>mmc host<tspan font-family="DengXian,DengXian_MSFontService,sans-serif" x="-94.7466" y="115">主设备封装在</tspan>platform_device<tspan font-family="DengXian,DengXian_MSFontService,sans-serif" x="384.753" y="115">中注册到驱动模型</tspan><tspan x="-510.08" y="172">platform_driver_register</tspan><tspan x="-50.0798" y="172">(&amp;</tspan><tspan x="-11.7466" y="172">xxx_mmc_driver</tspan><tspan x="256.587" y="172">)</tspan><tspan x="-510.08" y="230">struct </tspan><tspan x="-375.913" y="230">platform_device</tspan><tspan x="-69.2466" y="230">*</tspan><tspan x="-50.0798" y="230">pdev</tspan><tspan x="45.7534" y="230">= </tspan><tspan x="84.0867" y="230">platform_device_alloc</tspan><tspan x="486.587" y="230">(DRIVER_NAME, 0);</tspan><tspan x="-510.08" y="288">err = </tspan>platform_device_add<tspan x="-30.9133" y="288">(</tspan><tspan x="-11.7466" y="288">pdev</tspan><tspan x="64.9202" y="288">)</tspan><tspan x="-510.08" y="403">(2</tspan><tspan x="-471.747" y="403">)</tspan><tspan x="-452.58" y="403"> </tspan><tspan x="-433.413" y="403">Step </tspan><tspan x="-337.58" y="403">2</tspan><tspan x="-318.413" y="403">: mmc host</tspan><tspan font-family="DengXian,DengXian_MSFontService,sans-serif" x="-126.747" y="403">注册过程中通过</tspan>Linux<tspan font-family="DengXian,DengXian_MSFontService,sans-serif" x="193.087" y="403">驱动模型回调</tspan> <tspan x="404.253" y="403">xxx_mmc_probe</tspan>()<tspan x="-510.08" y="460">mmc = </tspan>mmc_alloc_host<tspan x="-126.747" y="460">(</tspan><tspan x="-107.58" y="460">sizeof</tspan><tspan x="7.42017" y="460">(struct </tspan><tspan x="160.753" y="460">xxx_mmc_host</tspan><tspan x="390.753" y="460">), &amp;</tspan><tspan x="467.42" y="460">pdev</tspan><tspan x="544.087" y="460">-</tspan><tspan x="563.253" y="460">&gt;dev);</tspan><tspan x="-462.08" y="518">--</tspan><tspan x="-404.58" y="518">Initialize host struct </tspan><tspan x="36.2534" y="518">--</tspan><tspan x="-510.08" y="576">mmc_add_host</tspan><tspan x="-280.08" y="576">(mmc)</tspan><tspan font-family="DengXian,DengXian_MSFontService,sans-serif" x="-510.08" y="634">这个过程中通过</tspan>MMC bus<tspan font-family="DengXian,DengXian_MSFontService,sans-serif" x="-151.913" y="634">尝试将</tspan>MMC Driver<tspan font-family="DengXian,DengXian_MSFontService,sans-serif" x="135.753" y="634">和</tspan>MMC card Device<tspan font-family="DengXian,DengXian_MSFontService,sans-serif" x="455.253" y="634">绑定在一起</tspan></text><path d="M2.15589-0.892516 459.391 1103.57 455.079 1105.35-2.15589 0.892516ZM462.809 1099.62 465.266 1123.86 449.873 1104.98Z" fill="#7F6000" transform="matrix(-1 -8.74228e-08 -8.74228e-08 1 1767.77 1176.5)"/><path d="M2505.05 1896.8 2073.58 1200.58 2077.54 1198.12 2509.02 1894.34ZM2070.84 1205.02 2064.5 1181.5 2082.74 1197.65Z" fill="#7F6000"/><rect x="2571" y="937" width="969" height="239" stroke="#000000" stroke-width="4" stroke-linejoin="round" stroke-miterlimit="10" fill="none"/><text font-family="Courier New,Courier New_MSFontService,sans-serif" font-weight="700" font-size="37" transform="translate(2898.98 975)">MMC<tspan x="89.3333" y="0">host</tspan><tspan x="201" y="0">Class</tspan><tspan font-weight="400" font-size="32" x="-318.58" y="69">struct class </tspan><tspan font-size="32" x="-69.4133" y="69">mmc_host_class</tspan><tspan font-weight="400" font-size="32" x="218.087" y="69">= </tspan><tspan font-weight="400" font-size="32" x="256.42" y="69">{</tspan><tspan font-weight="400" font-size="32" x="-241.913" y="107">.name           = "</tspan><tspan font-weight="400" font-size="32" x="122.253" y="107">mmc_host</tspan><tspan font-weight="400" font-size="32" x="275.587" y="107">",</tspan><tspan font-weight="400" font-size="32" x="-241.913" y="146">.</tspan><tspan font-weight="400" font-size="32" x="-222.747" y="146">dev_release</tspan><tspan font-weight="400" font-size="32" x="64.7532" y="146">= </tspan><tspan font-weight="400" font-size="32" x="103.087" y="146">mmc_host_classdev_release</tspan><tspan font-weight="400" font-size="32" x="582.253" y="146">,</tspan><tspan font-weight="400" font-size="32" x="-318.58" y="184">};</tspan><tspan fill="#353A3D" font-size="32" x="-93.3335" y="-312">mmc_host</tspan><tspan fill="#353A3D" font-family="DengXian,DengXian_MSFontService,sans-serif" font-size="32" x="79.1665" y="-312">类</tspan><tspan fill="#353A3D" font-family="DengXian,DengXian_MSFontService,sans-serif" font-size="32" x="111.167" y="-312">注册</tspan><tspan fill="#353A3D" font-family="DengXian,DengXian_MSFontService,sans-serif" font-size="32" x="175.167" y="-312">流程</tspan><tspan fill="#353A3D" font-family="DengXian,DengXian_MSFontService,sans-serif" font-size="32" x="239.167" y="-312">：</tspan><tspan fill="#353A3D" font-size="32" x="-318.58" y="-197">subsys_initcall</tspan><tspan fill="#353A3D" font-size="32" x="-31.0801" y="-197">(</tspan><tspan fill="#353A3D" font-size="32" x="-11.9133" y="-197">mmc_init</tspan><tspan fill="#353A3D" font-size="32" x="141.42" y="-197">)</tspan><tspan fill="#353A3D" font-size="32" x="-318.58" y="-140">mmc_register_host_class</tspan><tspan fill="#353A3D" font-size="32" x="122.253" y="-140">()</tspan><tspan font-size="32" x="-318.58" y="-82">class_register</tspan><tspan font-size="32" x="-50.2468" y="-82">(&amp;</tspan><tspan font-size="32" x="-11.9133" y="-82">mmc_host_class</tspan><tspan font-size="32" x="256.42" y="-82">)</tspan></text><rect x="2507" y="2013" width="804" height="407" stroke="#000000" stroke-width="4" stroke-linejoin="round" stroke-miterlimit="10" fill="none"/><text font-family="Courier New,Courier New_MSFontService,sans-serif" font-weight="700" font-size="37" transform="translate(2741.38 2051)">Platform Driver<tspan font-weight="400" font-size="32" x="-224.913" y="69">struct </tspan><tspan font-weight="400" font-size="32" x="-90.7468" y="69">platform_driver</tspan><tspan font-size="32" x="215.92" y="69">xxx_mmc_driver</tspan><tspan font-weight="400" font-size="32" x="503.42" y="69">= </tspan><tspan font-weight="400" font-size="32" x="-224.913" y="107">{</tspan><tspan font-weight="400" font-size="32" x="-148.247" y="155">.probe      = </tspan><tspan font-size="43" x="120.087" y="155">xxx_mmc_probe</tspan><tspan font-weight="400" font-size="32" x="453.753" y="155">,</tspan><tspan font-weight="400" font-size="32" x="-148.247" y="197">.remove     = </tspan><tspan font-weight="400" font-size="32" x="120.087" y="197">xxx_mmc_remove</tspan><tspan font-weight="400" font-size="32" x="388.42" y="197">,</tspan><tspan font-weight="400" font-size="32" x="-148.247" y="235">.driver     = {</tspan><tspan font-weight="400" font-size="32" x="-71.5801" y="274">.name   = DRIVER_NAME,</tspan><tspan font-weight="400" font-size="32" x="-148.247" y="312">},</tspan><tspan font-weight="400" font-size="32" x="-224.913" y="350">};</tspan></text><path d="M1562 2739C1562 2707.52 1587.52 2682 1619 2682L2343 2682C2374.48 2682 2400 2707.52 2400 2739L2400 2967C2400 2998.48 2374.48 3024 2343 3024L1619 3024C1587.52 3024 1562 2998.48 1562 2967Z" stroke="#4472C4" stroke-width="4" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text font-family="Courier New,Courier New_MSFontService,sans-serif" font-weight="400" font-size="43" transform="translate(1588.69 2738)">(1) <tspan font-weight="700" x="102.667" y="0">mmc_blk_alloc</tspan><tspan font-weight="700" x="436.333" y="0">(card)</tspan><tspan x="0" y="51">alloc_disk</tspan><tspan x="256.667" y="51">(</tspan><tspan x="282.333" y="51">perdev_minors</tspan>)<tspan x="25.6667" y="102">--</tspan><tspan x="102.667" y="102">Initialize disk </tspan><tspan x="513.333" y="102">--</tspan><tspan x="0" y="153">mmc_init_queue</tspan><tspan x="359.333" y="153">(&amp;queue, </tspan><tspan x="590.333" y="153">card</tspan><tspan x="693" y="153">)</tspan><tspan x="0" y="256">(2) </tspan><tspan font-weight="700" x="102.667" y="256">mmc_add_disk</tspan><tspan font-weight="700" x="410.667" y="256">(md)</tspan></text><path d="M2908.73 1649.8 3072.9 2170.02 3068.45 2171.42 2904.27 1651.2ZM3076.65 2166.39 3077 2190.75 3063.3 2170.6Z" fill="#FFC000"/><path d="M2927 2347 2927 2473.35 2919 2473.35 2919 2347ZM2935 2469.35 2923 2509.35 2911 2469.35Z" fill="#FFC000"/><path d="M1443.5 2297.83 1984.26 2297.83 1984.26 2658.74 1978.92 2658.74 1978.92 2300.5 1981.59 2303.17 1443.5 2303.17ZM1989.59 2656.07 1981.59 2682.74 1973.59 2656.07Z" fill="#00B0F0"/><path d="M1843.99 663.231 1738.24 635.324C1714.5 652.812 1672.54 654.98 1644.52 640.166 1616.49 625.352 1613.02 599.165 1636.76 581.676 1660.5 564.188 1702.46 562.02 1730.48 576.834 1751.17 587.768 1759.15 605.444 1750.65 621.508Z" stroke="#FFC000" stroke-width="2" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text font-family="Courier New,Courier New_MSFontService,sans-serif" font-weight="700" font-size="53" transform="translate(1671.12 624)">1</text><path d="M2746.99 663.231 2641.24 635.324C2617.5 652.812 2575.54 654.98 2547.52 640.166 2519.49 625.352 2516.02 599.165 2539.76 581.676 2563.5 564.188 2605.46 562.02 2633.48 576.834 2654.17 587.768 2662.15 605.444 2653.65 621.508Z" stroke="#FFC000" stroke-width="2" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text font-family="Courier New,Courier New_MSFontService,sans-serif" font-weight="700" font-size="53" transform="translate(2574.16 624)">2</text><path d="M1163.28 1578.72 1219.52 1465.7C1188.13 1453.57 1178.57 1427.97 1198.16 1408.53 1217.76 1389.08 1259.09 1383.16 1290.48 1395.3 1321.87 1407.43 1331.43 1433.03 1311.84 1452.47 1297.37 1466.83 1270.3 1474.3 1243.4 1471.37Z" stroke="#FFC000" stroke-width="2" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text font-family="Courier New,Courier New_MSFontService,sans-serif" font-weight="700" font-size="53" transform="translate(1239 1446)">3</text><path d="M3304.97 1399.01 3379.87 1345.25C3360.62 1325.73 3370.37 1300.17 3401.64 1288.16 3432.92 1276.14 3473.88 1282.23 3493.13 1301.75 3512.38 1321.27 3502.63 1346.83 3471.36 1358.84 3448.27 1367.71 3418.87 1366.94 3397.05 1356.91Z" stroke="#FFC000" stroke-width="2" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text font-family="Courier New,Courier New_MSFontService,sans-serif" font-weight="700" font-size="53" transform="translate(3420.42 1338)">4</text><path d="M1981.71 2579.41 2153.08 2346.46C2123.92 2332.52 2118.37 2306.48 2140.69 2288.28 2163.01 2270.08 2204.75 2266.61 2233.92 2280.54 2263.08 2294.48 2268.63 2320.52 2246.31 2338.72 2229.83 2352.16 2201.94 2358.01 2175.81 2353.5Z" stroke="#FFC000" stroke-width="2" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text font-family="Courier New,Courier New_MSFontService,sans-serif" font-weight="700" font-size="53" transform="translate(2177.9 2329)">5</text></g></svg>